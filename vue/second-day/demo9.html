<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script type="text/javascript" src="lib/vue.js"></script>
    <script type="text/javascript" src="lib/vue-bus.js"></script>
</head>

<body>
    <div id="app">
    	<todo-text></todo-text>
    	<!-- <toso-list></toso-list> -->
    </div>
    <script type="text/javascript">
    var eventhub = new Vue({
        data: function() {
            return {
                todos: []
            }
        },
        create: function() {
            this.$bus.on('add', this.addNewText);
            this.$bus.on("del", this.removeText);
        },
        beforeDestroy: function() {
            this.$bus.off("add", this.addNewText);
            this.$bus.off("del", this.removeText);
        },
        methods: {
            addNewText: function(text) {
            	console.log(text);
                this.todos.push(text);
            },
            removeText: function(index) {
                this.todos.splice(index, 1);
            }
        }
    });
    var todoText = {
        template: `<div><input v-model="newTodoText"><button @click="add">add</button></div>`,
        data(){
        	return {
        		newTodoText:''
        	}
        },
        methods:{
        	add:function(){
        		// console.log(1);
        		this.$bus.emit('add',this.addNewText);
        		this.newTodoText="";
        	}
        }
    };
    // var todoList={
    // 	template:`<ul></ul>`,
    // }
    new Vue({
    	el:"#app",
    	components:{
    		"todoText":todoText
    	}
    })
    </script>
</body>

</html>
